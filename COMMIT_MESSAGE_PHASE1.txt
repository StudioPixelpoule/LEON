feat(stability): Phase 1 - Stabilisation complÃ¨te ğŸ›¡ï¸

Transformation de LEON d'un prototype fonctionnel en une base robuste
et production-ready, avec gestion d'erreurs complÃ¨te et logs structurÃ©s.

## ğŸ¯ ProblÃ¨mes RÃ©solus

- âŒ Erreurs 500 sur sous-titres PGS/VOBSUB â†’ âœ… Erreur 415 propre avec fallback
- âŒ Logs non structurÃ©s â†’ âœ… Format ISO 8601 avec contexte
- âŒ Pas de retry automatique â†’ âœ… Exponential backoff sur erreurs transitoires
- âŒ Messages techniques â†’ âœ… Messages user-friendly

## âœ¨ NouveautÃ©s

### ErrorHandler CentralisÃ© (lib/error-handler.ts)
- 16 codes d'erreur dÃ©finis (VIDEO_CORRUPTED, NO_SPACE, etc.)
- Parsing intelligent des erreurs FFmpeg
- Retry automatique avec exponential backoff
- Messages user-friendly sÃ©parÃ©s des dÃ©tails techniques

### Logs StructurÃ©s
Format: `[ISO_TIMESTAMP] [CONTEXT] emoji Message { data }`

Exemple:
```
[2025-11-23T15:42:13.456Z] [HLS] ğŸ¬ DÃ©marrage transcodage { file: 'movie.mkv' }
```

### Gestion Robuste Sous-titres (app/api/subtitles/route.ts)
- DÃ©tection Ã©tendue formats image (PGS, VOBSUB, DVB, XSUB)
- Fallback automatique vers sous-titres externes
- TÃ©lÃ©chargement auto depuis OpenSubtitles
- Capture stderr FFmpeg pour diagnostic

### FFmpegManager AmÃ©liorÃ© (lib/ffmpeg-manager.ts)
- MÃ©thode `runFFmpegWithRetry()` avec 3 tentatives max
- Gestion propre processus (SIGTERM puis SIGKILL)
- Logs structurÃ©s sur tout le cycle de vie

### API HLS Robuste (app/api/hls/route.ts)
- Capture complÃ¨te stderr FFmpeg
- Gestion timeouts (erreur 504 + Retry-After)
- Logs progression moins verbeux
- ErrorHandler intÃ©grÃ©

## ğŸ“ Fichiers

### CrÃ©Ã©s
- lib/error-handler.ts (220 lignes)
- PHASE1_STABILISATION_TESTS.md
- QUICKSTART_PHASE1.md
- RESUME_EXECUTIF_PHASE1.md
- recapitulatif/phase1-stabilisation-complete.md

### ModifiÃ©s
- app/api/subtitles/route.ts (+22 lignes)
- lib/ffmpeg-manager.ts (+59 lignes)
- app/api/hls/route.ts (+38 lignes)

**Total: +339 lignes**

## ğŸ§ª Tests

Voir `PHASE1_STABILISATION_TESTS.md` pour la checklist complÃ¨te (7 tests)

Test principal:
1. Ouvrir film avec sous-titres PGS
2. Activer les sous-titres
3. VÃ©rifier qu'il n'y a PAS d'erreur 500 âœ…

## ğŸš€ Prochaines Phases

- Phase 2: Performance (cache, VAAPI, profils qualitÃ©)
- Phase 3: FluiditÃ© (buffer adaptatif, dÃ©tection bande passante)
- Phase 4: Monitoring (mÃ©triques, dashboard admin)

## ğŸ“Š MÃ©triques

- Codes d'erreur dÃ©finis: 16
- Couverture gestion d'erreurs: 100% routes critiques
- Format logs: ISO 8601 structurÃ©
- Retry automatique: Oui (max 3 tentatives)

---

Breaking Changes: Aucun
Backward Compatible: Oui
Tests: Manuels (checklist fournie)
Documentation: ComplÃ¨te (4 fichiers)


